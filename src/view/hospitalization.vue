<style lang="less">
  .hospital{
  .title-third-1{
    position: relative;
    float: left;
    width: calc(55% - 10px);
    height: 25px;
    margin-left: 10px;
    overflow:hidden;
  }
  .title-third-2{
    position: relative;
    float: left;
    width: 45%;
    height: 25px;
    overflow:hidden;
  }
  .title-third-2-p{
    float: left;
    width: 250px;
    height: 25px;
  }
  .title-button1{
    float: right;
    margin-top: 6px;
    margin-bottom: 2px;
    margin-right: 15px;
    width: 100px;
    height: 17px;
    line-height: 17px;
    vertical-align: middle;
    text-align: center;
    background-color: white;
    border-radius: 3px;
    font-size: 12px;
  }
  .contents{
    margin:0 10px 10px;
  }
  .left{
    float: left;
    width: calc(55% - 10px);
    margin-right: 10px;
    height: 650px;
    background: url("../assets/image/border_1.png");
    background-size: 100% 100%;
    .content1{
      width: 100%;
      height: 120px;
      .content{
        float: left;
        width: calc(33.3333%);
        height: 120px;
        .content-left{
          float: left;
          width: 120px;
          height: 120px;
        }
        .content-right{
          float: right;
          width: calc(100% - 120px);
          height: 120px;
          .title{
            width: 90px;
            height: 20px;
            margin: 15px auto 0;
            text-align: center;
            background: url("../assets/image/button.png");
            background-size: 100% 100%;
          }
          p{
            margin:10px 0 0 0;
            text-align: center;
            color: white;
          span{
            margin-left: 20px;
            color: #25ccff;
          }
          }
        }
      }
    }
    .content2{
      width: 100%;
      height: 170px;
      .content2-left{
        float: left;
        width: 40%;
        height: 170px;
        .block{
          float: left;
          width: 50%;
          height: 170px;
          .title{
            width: 90px;
            height: 20px;
            margin: 10px auto 0;
            text-align: center;
            background: url("../assets/image/button.png");
            background-size: 100% 100%;
          }
          .chart{
            width: 100%;
            height: 90px;
          }
          p{
            margin:2px 0 0 0;
            text-align: center;
            color: white;
          span{
            margin-left: 20px;
            color: #25ccff;
          }
          }
        }
      }
      .content2-right{
        float: left;
        width: 60%;
        height: 170px;
        .block-left{
          float: left;
          width: 140px;
          height: 170px;
        }
        .block-right{
          float: left;
          height: 170px;
          width: calc(100% - 140px);
          .title{
            width: 90px;
            height: 20px;
            margin: 10px auto 0;
            text-align: center;
            background: url("../assets/image/button.png");
            background-size: 100% 100%;
          }
          .table{
            width: 300px;
            height: 70px;
            margin: 25px auto 0;
            background: url("../assets/image/table_1.png");
            background-size: 100% 100%;
          }
        }
      }
    }
    .content3{
      width: 100%;
      height: 150px;
      .content3-block1{
        float: left;
        width: 50%;
        height: 150px;
        .title1{
          padding: 5px 0 0 10px;
          width: 100%;
          height: 30px;
        }
        .block{
          float: left;
          width: 50%;
          height: 120px;
          .content-left{
            float: left;
            width: 90px;
            height: 120px;
          }
          .content-right{
            float: right;
            width: calc(100% - 90px);
            height: 120px;
          .title{
            width: 80px;
            height: 20px;
            margin: 15px auto 0;
            font-size: 12px;
            line-height: 20px;
            vertical-align: middle;
            text-align: center;
            background: url("../assets/image/button.png");
            background-size: 100% 100%;
          }
          p{
            margin:10px 0 0 0;
            text-align: center;
            color: white;
          span{
            margin-left: 15px;
            color: #25ccff;
          }
          }
          }
        }
      }
    }
    .content4{
      width: 100%;
      height: 210px;
      .chart{
        float: left;
        width: 50%;
        height: 210px;
      }
    }
  }

  .right1{
    float: left;
    width: calc(45% - 5px);
    margin-right: 5px;
    margin-bottom: 10px;
    height: 320px;
  }
  .right2{
    float: left;
    width: calc(45% - 5px);
    margin-right: 5px;
    height: 320px;
    background: url("../assets/image/border_1.png");
    background-size: 100% 100%;
  }
  .content-head4{
    position: relative;
    overflow:hidden;
    width: 100%;
    height: 35px;
  }
  .content-head4-title{
    width: 100%;
    height: 30px;
    color: #ffffff;
    font-size: 16px;
    text-align: center;
    line-height: 30px;
    vertical-align: middle;
  }
  .content-content4{
    position: relative;
    overflow:hidden;
    width: 100%;
    height: 215px;
  }
  .content-footer4{
    margin-left:80px;
    overflow:hidden;
    height: 40px;
  }
  .radio2{
    position: relative;
    float: right;
    margin: 20px 0 0;
    width: 100px;
    height: 20px;
  }
  .radio2 p{
    float: left;
    margin-top: -3px;
    margin-left: 3px;
    width: 70px;
    line-height: 20px;
    font-size: 14px;
    color: #ffffff;
  }
  .radio_behind_1{
    float: left;
    padding-top: 2px;
    padding-left: 2px;
    height: 14px;
    width: 14px;
    background-color: #ffffff;
    border-radius: 50%;
  }
  .radio_front_1{
    position: relative;
    height: 10px;
    width: 10px;
    background-color: #2488e8;
    border-radius: 50%;
  }
  .radio_front_2{
    position: relative;
    height: 10px;
    width: 10px;
    background-color: #0049a7;
    border-radius: 50%;
  }
  .border-buttom{
    border-bottom: 1px solid #ffffff;
  }
  .border-right{
    border-right: 1px solid #ffffff;
  }
  .table-list table tr td:nth-child(1){
    width:auto;
  }
  }
</style>
<template>
  <div class="con" @click="flag===true ? start() : pause()">
    <prompt-box :flag="flag" v-if="show"></prompt-box>

    <div class="con">
      <head-title :headTip="headTip">
        <head-select slot="headSelect"></head-select>
      </head-title>
      <div class="hospital main">
        <div class="nav-1">
          <div class="title-third-1">
            <p class="font_style_1">出院统计</p>
          </div>
          <div class="title-third-2">
            <p class="title-third-2-p font_style_1">02心血管内科病种往院收入排名</p>
            <div class="title-button1">
              <p>手术住院费用</p>
            </div>
            <div class="title-button1">
              <p>病种收入排名</p>
            </div>
          </div>

        </div>
        <div class="contents">
          <div class="left">
            <div class="content1 border-buttom">
              <div class="content">
                <div class="content-left" ref="chart_1">
                </div>
                <div class="content-right">
                  <div class="title">出院人数</div>
                  <p>指标<span>1,276</span></p>
                  <p>完成<span>{{chart_num_1}}</span></p>
                </div>
              </div>
              <div class="content">
                <div class="content-left" ref='chart_2'>

                </div>
                <div class="content-right">
                  <div class="title">出院收入</div>
                  <p>指标<span>1,276</span></p>
                  <p>完成<span>{{chart_num_2}}</span></p>
                </div>
              </div>
              <div class="content">
              <div class="content-left" ref="chart_3">

              </div>
              <div class="content-right">
                <div class="title">均次费用</div>
                <p>指标<span>1,276</span></p>
                <p>完成<span>{{chart_num_3}}</span></p>
              </div>
            </div>
            </div>
            <div class="content2 border-buttom">
              <div class="content2-left border-right">
                <div class="block">
                  <div class="title">平均住院天数</div>
                  <div class="chart" ref="chart_4"></div>
                  <p>指标<span>1,276</span></p>
                  <p>完成<span>{{chart_num_4}}</span></p>
                </div>
                <div class="block">
                  <div class="title">平均床日费用</div>
                  <div class="chart" ref="chart_5"></div>
                  <p>指标<span>1,276</span></p>
                  <p>完成<span>{{chart_num_5}}</span></p>
                </div>
              </div>
              <div class="content2-right">
                <div class="block-left" ref="chart_6"></div>
                <div class="block-right">
                  <div class="title">手术人次</div>
                  <div class="table"></div>
                </div>
              </div>
            </div>
            <div class="content3">
              <div class="content3-block1 border-right">
                <div class="title1">
                  <p class="font_style_1">药品分析</p>
                </div>
                <div class="block">
                  <div class="content-left" ref="chart_7">
                  </div>
                  <div class="content-right">
                    <div class="title">药占比</div>
                    <p>指标<span>1,276</span></p>
                    <p>完成<span>{{chart_num_7}}</span></p>
                  </div>
                </div>
                <div class="block">
                  <div class="content-left" ref="chart_8">
                  </div>
                  <div class="content-right">
                    <div class="title">药品均次费用</div>
                    <p>指标<span>1,276</span></p>
                    <p>完成<span>{{chart_num_8}}</span></p>
                  </div>
                </div>
              </div>
              <div class="content3-block1">
                <div class="title1"></div>
                <div class="block">
                  <div class="content-left" ref="chart_9">
                  </div>
                  <div class="content-right">
                    <div class="title">医保人次占比</div>
                    <p><span>{{chart_num_9}}%</span></p>
                  </div>
                </div>
                <div class="block">
                  <div class="content-left" ref="chart_10">
                  </div>
                  <div class="content-right">
                    <div class="title">医保收入占比</div>
                    <p><span>{{chart_num_10}}%</span></p>
                  </div>
                </div>
              </div>
            </div>
            <div class="content4">
              <div class="chart border-right">
                <table-list :tableData="tableData1"></table-list>
              </div>
              <div class="chart">
                <table-list :tableData="tableData2"></table-list>
              </div>
            </div>

          </div>
          <div class="right1">
            <table-list :tableData="tableData"></table-list>
          </div>
          <div class="right2">
            <div class="content-head4">
              <div class="radio2">
                <div class="radio_behind_1">
                  <div class="radio_front_1"></div>
                </div>
                <p>人次均次</p>
              </div>
              <div class="radio2">
                <div class="radio_behind_1">
                  <div class="radio_front_2"></div>
                </div>
                <p>收入人次</p>
              </div>
            </div>
            <div class="content-head4-title">
              2018年平均住院日月度趋势
            </div>
            <div class="content-content4" ref="chart_11"></div>
            <div class="content-footer4">
              <indicator-light :selectLight="selectLight"></indicator-light>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
<script>
  import eCharts from 'echarts'
  import {random, clone, router} from '@/tool/tool'

  import headTitle from '@/components/head'
  import headSelect from '@/components/head-select'
  import indicatorLight from '@/components/indicator'
  import promptBox from '@/components/prompt'

  import tableList from '@/components/table-list'
  let tableData=[
    ['排名','科室名称','入径率','完成率','入径数','收治数','平均住院日','药占比','均费差额'],
    ['合计','心房颤动介入治疗','88%','88%','236','236','6.7','19%','24,199'],
    ['1','心力衰竭','100%','100%','17','17','7.6','19%','20,849'],
    ['2','急性ST段抬高心肌梗塞','100%','100%','14','14','1.9','13%','17,903'],
    ['3','慢性心绞痛介入治疗','100%','100%','10','10','5.2','11%','24,199'],
    ['4','病态心房结综合征','99%','99%','6','6','10.3','26%','82,972'],
    ['5','高血压','99%','99%','1','1','4.3','9%','15,135'],
    ['6','心房颤动介入治疗','99%','99%','1','1','3.9','18%','24,199'],
    ['7','慢性心绞痛介入治疗','99%','99%','0','0','10.9','21%','24,199']
  ];
  let tableData1=[
    ['项目名称','当月(6月)','上月(5月)','同期(6月)'],
    ['心房颤动介入治疗','24,199','24,199','24,199'],
    ['心力衰竭','20,849','20,849','20,849'],
    ['急性ST段抬高心肌梗塞','17,903','17,903','17,903'],
    ['慢性心绞痛介入治疗','24,199','24,199','24,199'],
    ['病态心房结综合征','82,972','82,972','82,972']
  ];
  let tableData2=[
    ['住院城保','指标','完成'],
    ['心房颤动介入治疗','24,199','24,199'],
    ['心力衰竭','20,849','20,849'],
    ['急性ST段抬高心肌梗塞','17,903','17,903'],
    ['慢性心绞痛介入治疗','24,199','24,199'],
    ['病态心房结综合征','82,972','82,972']
  ];
  let meterOption={
//    tooltip : {
//      formatter: "{a} <br/>{b} : {c}%"
//    },
//        grid : {
//          top : 0,    //距离容器上边界40像素
//          bottom: 0,   //距离容器下边界30像素
//          left:0,
//          right:0,
//          containLabel: true
//        },
    series: [
      {
        type: 'gauge',
        min:0,
        max:1500,
        radius:36, // 半径
        center:['50%','60%'],
        axisLine: {
          show:true,
          // 属性lineStyle控制线条样式
          lineStyle: {
            // 控制表盘宽度
            width: 15,
            color:[[0.2,'#76e79e'],[0.5,'#ece35d'],[0.7,'#f9a701'],[1, '#f67336']],
//                shadowColor: '#fff', //默认透明
//                shadowBlur: 10

          }
        },
        splitLine: { // 分隔线
          length: 15, // 属性length控制线长
          lineStyle: { // 属性lineStyle（详见lineStyle）控制线条样式
            width: 1,
            color: '#000',
//                shadowColor: '#fff', //默认透明
//                shadowBlur: 10
          }
        },
        axisTick: { // 刻度样式。
          show: true,
          lineStyle: {       // 属性lineStyle（详见lineStyle）控制线条样式
            width:1,
            color: '#000'
          }
        },
        itemStyle: {
          normal: {  // 指针颜色渐变
            color: '#2c98de'
          }
        },
        pointer: {           // 分隔线
          width:5,   // 指针宽度设置
          length:28,
        },
        detail: { // 表盘详情
          show: true,
//          offsetCenter: [0, '80%'], // 数值显示位置
          formatter: ' ',
          textStyle: {
            fontSize: 14,
            color:'#fff'
          }
        },
        axisLabel: { //刻度标签。
          show:false, // false 去除刻度
        },
        data: [{value: 50, name: ''}]
      }
    ]
  };
  let option_1=clone(meterOption);
  let option_2=clone(meterOption);
  let option_3=clone(meterOption);
  let option_4=clone(meterOption);
  let option_5=clone(meterOption);
  let option_6=clone(meterOption);
  let option_7=clone(meterOption);
  let option_8=clone(meterOption);
  let option_9=clone(meterOption);
  let option_10=clone(meterOption);
  option_9.series[0].max=100;
  option_9.series[0].detail.offsetCenter=[0,'100%'];
  option_10.series[0].max=100;
  option_10.series[0].detail.offsetCenter=[0,'100%'];
  let option_11={
    tooltip: {
      trigger: 'axis'
    },
//          legend: {
//            data:['邮件营销','联盟广告','视频广告','直接访问','搜索引擎']
//          },
    grid: {
      top:'5%',
      left: '5%',
      right: '3%',
      bottom: '5%',
      containLabel: true
    },
    // 工具箱
//          toolbox: {
//            feature: {
//              saveAsImage: {}
//            }
//          },
    xAxis: {
      type: 'category',
      axisTick: {show: false},
      axisLine:{
        lineStyle:{
          color:'#fff',
          width:1,//  坐标轴宽度 这里是为了突出显示加上的
        }
      },

      boundaryGap: true,
      data: [1,2,3,4,5,6,7,8,9,10,11,12]
    },
    yAxis: [{
      type: 'value',
      max:10,
      axisLabel: {
        formatter: '{value}'
      },
      axisLine:{
        lineStyle:{
          color:'#fff',
          width:1,//  坐标轴宽度 这里是为了突出显示加上的
        }
      }
    },{
      type: 'value',
      min: 0,
      max: 25000,
      position: 'right',
      axisLabel: {
        formatter: '{value}'
      },
      splitLine:{  // 去掉与坐标轴平行的直线
        show:false
      },
      axisTick: {
        show: false
      },
      axisLine:{
        lineStyle:{
          color:'#fff',
          width:1,//  坐标轴宽度 这里是为了突出显示加上的
        }
      }
    }],
    series: [
      {
        type:'line',
        itemStyle : {
          normal : {
            lineStyle:{
              color:'#f9ae0e'
            }
          }
        },
        data:[120, 132, 101, 134, 90, 230, 210]
      },
      {
        type:'line',
        itemStyle : {
          normal : {
            lineStyle:{
              color:'#ebdf07'
            }
          }
        },
        data:[220, 182, 191, 234, 290, 330, 310]
      },
      {
        type:'line',
        itemStyle : {
          normal : {
            lineStyle:{
              color:'#8bea7f'
            }
          }
        },
        data:[150, 232, 201, 154, 190, 330, 410]
      },
      {
        type:'bar',
        barWidth: '30%',
        barGap: '0',
        color:'#1286ed',
        data:[10, 52, 200, 334, 390, 330, 220]
      },
      {
        type:'bar',
        barWidth:'30%',
        color:'#e9615c',
        itemStyle : {
          normal : {
            lineStyle:{

            }
          }
        },
        data:[320, 332, 301, 334, 390, 330, 320]
      },
      {
        type:'line',
        barWidth:'30%',
        color:'#6017fc',
        itemStyle : {
          normal : {
            lineStyle:{

            }
          }
        },
        data:[320, 332, 301, 334, 390, 330, 320]
      }
    ]
  };
  export default{
    data () {
      return {
        headTip:'主任查询>>住院',
        tableData,
        tableData1,
        tableData2,
        selectLight:{
          selectOne:true,
          one:'平均住院日',
          selectTwo:true,
          two:'平均住院日同期',
          selectThree:true,
          three:'标准值',
          selectFour:true,
          four:'住院天数',
          selectFive:true,
          five:'入径数',
          selectSix:false,
          six:''
        },
        chart_num_1:0,
        chart_num_2:0,
        chart_num_3:0,
        chart_num_4:0,
        chart_num_5:0,
        chart_num_7:0,
        chart_num_8:0,
        chart_num_9:0,
        chart_num_10:0,
        flag:false,
        timer:null,
        show:false,
        showTimer:null,
        chartTimer:null,
        timeCount:0

      }
    },
    components:{
      headTitle,
      tableList,
      headSelect,
      promptBox,
      indicatorLight
    },
//    activated () {
//      router('/day',this);
//    },
    methods:{
      pause () {
        clearInterval(this.timer);
        if(this.show){
          return false
        }
        this.flag=!this.flag;
        this.show=true;
        this.showTimer=setTimeout(()=>{
          clearTimeout(this.showTimer);
          this.show=false;
        },1500);
      },
      start () {
        if(this.show){
          return false
        }
        this.flag=!this.flag;
        this.show=true;
        this.showTimer=setTimeout(()=>{
          clearTimeout(this.showTimer);
          this.show=false;

        },1500);
        this.timer=setInterval(()=>{
          this.timeCount++;
          console.log(this.timeCount)
          if(this.timeCount>=10){
            clearInterval(this.timer)
            this.$router.push('/day')
          }
        },1000)
      }


    },

    mounted () {
      this.timer=setInterval(()=>{
        this.timeCount++;
        console.log(this.timeCount)
        if(this.timeCount>=10){
          clearInterval(this.timer)
          this.$router.push('/day')
        }
      },1000)

      let chart_1=eCharts.init(this.$refs.chart_1);
      let chart_2=eCharts.init(this.$refs.chart_2);
      let chart_3=eCharts.init(this.$refs.chart_3);
      let chart_4=eCharts.init(this.$refs.chart_4);
      let chart_5=eCharts.init(this.$refs.chart_5);
      let chart_6=eCharts.init(this.$refs.chart_6);
      let chart_7=eCharts.init(this.$refs.chart_7);
      let chart_8=eCharts.init(this.$refs.chart_8);
      let chart_9=eCharts.init(this.$refs.chart_9);
      let chart_10=eCharts.init(this.$refs.chart_10);
      let chart_11=eCharts.init(this.$refs.chart_11);
      this.chartTimer=setInterval(()=>{
        this.chart_num_1=random(500,900);
        this.chart_num_2=random(500,900);
        this.chart_num_3=random(1000,1500);
        this.chart_num_4=random(500,900);
        this.chart_num_5=random(500,900);
        this.chart_num_7=random(500,900);
        this.chart_num_8=random(500,900);
        this.chart_num_9=random(70,90);
        this.chart_num_10=random(70,90);
        option_1.series[0].data[0].value=this.chart_num_1;
        option_2.series[0].data[0].value=this.chart_num_2;
        option_3.series[0].data[0].value=this.chart_num_3;
        option_4.series[0].data[0].value=this.chart_num_4;
        option_5.series[0].data[0].value=this.chart_num_5;
        option_6.series[0].data[0].value=random(600,1500);
        option_7.series[0].data[0].value=this.chart_num_7;
        option_8.series[0].data[0].value=this.chart_num_8;
        option_9.series[0].data[0].value=this.chart_num_9;
        option_10.series[0].data[0].value=this.chart_num_10;
        chart_1.setOption(option_1,true);

        option_11.series[0].data=[random(5,8),random(5,8),random(5,8),random(5,8),random(5,8),random(5,8)];
        option_11.series[1].data=[random(5,8),random(5,8),random(5,8),random(5,8),random(5,8),random(5,8),random(5,8),random(5,8),random(5,8),random(5,8),random(5,8),random(5,8)];
        option_11.series[2].data=[7,7,7,7,7,7,7,7,7,7,7,7];
        option_11.series[3].data=[random(5,9),random(5,9),random(5,9),random(5,9),random(5,9)];
        option_11.series[4].data=[random(5,9),random(5,9),random(5,9),random(5,9),random(5,9)];
        option_11.series[5].data=[];

        chart_2.setOption(option_2,true);
        chart_3.setOption(option_3,true);
        chart_4.setOption(option_4,true);
        chart_5.setOption(option_5,true);
        chart_6.setOption(option_6,true);
        chart_7.setOption(option_7,true);
        chart_8.setOption(option_8,true);
        chart_9.setOption(option_9,true);
        chart_10.setOption(option_10,true);
        chart_11.setOption(option_11,true);

      },2000)
    },
    beforeDestroy(){
      clearInterval(this.chartTimer)
      clearInterval(this.timer)
    }

  }
</script>
